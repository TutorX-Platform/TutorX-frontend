<!-- web -->
<!-- <div class="add-question"> -->

<div class="progress">
  <div class="progress-bar progress-bar-animated" [ngStyle]="{ 'width': uploadProgress + '%' }"></div>
</div>

Progress: {{ uploadProgress | async }}% Complete


<form [formGroup]="addQuestionForm" (submit)="onDone()" class="form-container">
  <div mat-dialog-title fxLayout="column" class="top-container" fxLayoutAlign="center center">
    <div fxLayout="row" fxLayoutAlign="space-between center" class="header">
      <div class="header-title" *ngIf="role !== 'tutor' && subjects===''">Add Question</div>
      <div class="header-title" *ngIf="role !== 'tutor' && subjects!==''">Edit/View Question</div>
      <div class="header-title" *ngIf="role === 'tutor'">{{questionTitle}}</div>
      <div fxLayout="row" fxLayoutGap="10px" class="button-container" *ngIf="role !== 'tutor'">
        <button mat-stroked-button class="button-cancel" type="button" (click)="onCancel()">
          Cancel
        </button>
        <button mat-flat-button [class.dissabled]="addQuestionForm.invalid" [disabled]="addQuestionForm.invalid"
                class="button-done" type="submit">
          Done
        </button>
      </div>
      <div fxLayout="row" fxLayoutGap="10px" class="button-container" *ngIf="role === 'tutor'">
        <button mat-stroked-button class="button-cancel" type="button" (click)="onCancel()">
          Cancel
        </button>
        <!--          [disabled]="addQuestionForm.invalid"-->
        <button mat-flat-button *ngIf="status !== 'Inprogress'" [class.dissabled]="addQuestionForm.invalid"
                class="button-done" (click)="onAccept()" type="button">
          Accept
        </button>
      </div>
    </div>
    <div fxLayout="row" class="status-container" fxLayoutGap="8px">
      <div *ngIf="status !== 'Inprogress'" class="c-chip c-chip--neutral invert-false">Open</div>
      <div *ngIf="status === 'Inprogress'" class="c-chip c-chip--progress">In Progress</div>
      <div class="date-container">{{date | date:'yyyy/MM/dd h:mm:ss a'}}</div>
    </div>
  </div>
  <mat-dialog-content>
    <div fxLayout="column" class="bottom-container" *ngIf="role !== 'tutor'">
      <div fxLayout="column" class="form-fields">
        <div class="label">Question Title</div>
        <mat-form-field appearance="outline" class="my-form-field">
          <input matInput type="text" formControlName="questionTitle">
        </mat-form-field>
        <div fxLayout="row">
          <div fxLayout="column" class="search-container">
            <div class="label">Subject</div>
            <mat-form-field appearance="outline" class="my-form-field">
                  <span matPrefix>
                  <mat-icon>expand_more</mat-icon> &nbsp;&nbsp;</span>
              <input matInput type="text" formControlName="subject" [matAutocomplete]="auto">
              <mat-autocomplete #auto="matAutocomplete">
                <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                  {{option}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
          <div fxLayout="column" class="search-container" style="margin-left: 1%">
            <div class="label">Sub-category</div>
            <mat-form-field appearance="outline" class="my-form-field">
                  <span matPrefix>
                  <mat-icon>expand_more</mat-icon> &nbsp;&nbsp;</span>
              <input matInput type="text-12" formControlName="subCategory" [matAutocomplete]="auto1">
              <mat-autocomplete #auto1="matAutocomplete">
                <mat-option *ngFor="let subOption of subOptions" [value]="subOption">
                  {{subOption}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
          <div fxLayout="column" class="date-container">
            <div class="label">Due date-time</div>
            <mat-form-field appearance="outline" class="my-form-field">
              <input matInput [ngxMatDatetimePicker]="picker" [min]="date" placeholder="Choose a date & time"
                     formControlName="dueDateTime">
              <mat-datepicker-toggle matSuffix [for]="$any(picker)"></mat-datepicker-toggle>
              <ngx-mat-datetime-picker #picker></ngx-mat-datetime-picker>
            </mat-form-field>
          </div>
        </div>

        <div class="label">Description</div>
        <mat-form-field appearance="outline" class="my-form-field">
          <textarea matInput type="text" formControlName="description"
                    oninput='this.style.height = "";this.style.height = this.scrollHeight + 3 +"px"'></textarea>
        </mat-form-field>
      </div>
      <div>
        <div class="custom-dropzone" ngx-dropzone [accept]="'*'" (change)="onSelect($event)">
          <ngx-dropzone-label>
            <div fxLayout="row" fxLayoutAlign="center center">
              <mat-icon class="material-icons-outlined">
                file_upload
              </mat-icon>
              <div class="wording">Add Attachment</div>
            </div>
          </ngx-dropzone-label>
          <div fxLayout="row" fxLayoutGap="-150px">
            <custom-dropzone-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f"
                                     [removable]="true" (removed)="onRemove(f)">
              <!--<ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>-->
            </custom-dropzone-preview>
          </div>

        </div>
      </div>
      <div fxLayout="row" fxLayoutAlign="center center" style="margin-top: 24px" *ngIf="this.data !== null">
        <button mat-flat-button color="warn" *ngIf="role !== 'tutor'" (click)="onDeleteQuestion()">Delete this
          question
        </button>
      </div>

    </div>

    <!--In tutor-->
    <div fxLayout="column" class="bottom-container" *ngIf="role === 'tutor'">
      <div fxLayout="column" class="form-fields">
        <div class="label" style="margin-top: 0px !important;">Question Title</div>
        <div class="tutor-view-container">
          {{questionTitle}}
        </div>
        <div fxLayout="row">
          <div fxLayout="column" class="search-container">
            <div class="label">Subject</div>
            <div class="tutor-view-container">
              {{subjects}}
            </div>
          </div>
          <div fxLayout="column" class="date-container">
            <div class="label">Subject</div>
            <div class="tutor-view-container">
              {{subCategory}}
            </div>
          </div>
          <div fxLayout="column" class="date-container">
            <div class="label">Due date</div>
            <div class="tutor-view-container">
              {{dueDateTime | date:'yyyy/MM/dd h:mm:ss a' }}
            </div>
          </div>
        </div>

        <div class="label">Description</div>
        <div class="tutor-view-container">
          {{description}}
        </div>
      </div>
      <div class="attachment-viewer" fxLayout="row wrap" fxLayoutAlign="center center" fxLayoutGap="24px grid">
        <div *ngFor="let attachment of attachments; let i = index">
          <a fxLayout="column" class="drop-zone" href="{{attachment.toString()}}" target="_blank">
            <div fxLayout="row" fxLayoutAlign="center center">
              <img src="assets/icons/pdf.svg" class="icon-image" *ngIf="attachment.toString().includes('pdf')">
              <img src="assets/icons/jpeg.svg" class="icon-image" *ngIf="!attachment.toString().includes('pdf')">
            </div>
            <div fxLayout="row" fxLayoutAlign="center center">
              <div class="file-name">
                attachmet{{i + 1}}
              </div>
            </div>
          </a>
        </div>
      </div>
      <div fxLayout="row" fxLayoutAlign="center center" style="margin-top: 24px" *ngIf="this.data !== null">
        <button mat-flat-button color="warn" *ngIf="role !== 'tutor'">Delete this question</button>
      </div>

    </div>
  </mat-dialog-content>

</form>
<!-- </div> -->
